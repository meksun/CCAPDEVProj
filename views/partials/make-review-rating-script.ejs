<script>


if(document.getElementById("deletereview"))
	{document.getElementById("deletereview").addEventListener('click', delreview)
	async function delreview(event) {
		event.preventDefault()

		

	product = "<%=add.slug%>"
	title = "<%=add.title%>"
		

		const result = await fetch('/Product/<%=add.slug%>/delrev', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({
			   product,title
			})
		}).then((res) => res.json())

		if (result.status === 'ok') {
			// everythign went fine
			location.reload();
			return true;
			
		} else {
			alert(result.error)
		}
	}}

var stars
const reviewform = document.getElementById('reviewform')
	reviewform.addEventListener('submit', rate)

	async function rate(event) {
		event.preventDefault()

		

		if(document.getElementById('star1').checked) {
			stars = 1
	}else if(document.getElementById('star2').checked) {
		stars = 2
	}else if(document.getElementById('star3').checked) {
		stars = 3
	}else if(document.getElementById('star4').checked) {
		stars = 4
	}else if(document.getElementById('star5').checked) {
		stars = 5
	}
	review = document.getElementById("reviewinput").value
	product = "<%=add.slug%>"
	title = "<%=add.title%>"
		

		const result = await fetch('/Product/<%=add.slug%>/review', {
			method: 'POST',
			headers: {
				'Content-Type': 'application/json'
			},
			body: JSON.stringify({
			   review,stars,product,title
			})
		}).then((res) => res.json())

		if (result.status === 'ok') {
			// everythign went fine
			location.reload();
			return true;
			
		} else {
			alert(result.error)
		}
	}

</script>